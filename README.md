# PC端爬虫可视化工具设计方案

## 技术架构

### 核心技术栈
- **Python**: 主要开发语言
- **PyQt6**: 桌面应用UI框架
- **Flask**: Web服务框架
- **Vue.js**: 前端框架
- **SQLite**: 本地数据存储
- **Selenium**: 浏览器自动化和网页爬取

### 开发工具和库
- **Poetry**: 依赖管理
- **Black**: 代码格式化
- **Pytest**: 单元测试
- **Pandas**: 数据处理
- **BeautifulSoup4**: HTML解析
- **WebSocket**: 实时通信
- **Element Plus**: UI组件库

## 核心功能模块

### 1. 配置管理模块
- 全局配置设置
  - 数据保存路径配置
  - 爬取频率设置
  - 并发数控制
  - 代理设置
- 配置导入/导出

### 2. 任务管理模块
- 任务CRUD操作
- 任务状态监控
- 任务优先级设置
- 任务调度管理
- 针对单个网页的特定配置
  - URL规则设置
  - 请求头配置
  - 登录态管理
  - 爬取规则配置

### 3. 内置浏览器模块
- 基于PyQt6 WebEngine的浏览器实现
- 开发者工具集成
- 页面状态监控
- 页面交互记录

### 4. 元素选择器模块
- 手动选择模式
  - 元素高亮
  - 元素属性展示
  - XPath/CSS选择器生成
- 自动选择模式
  - 相似元素识别
  - 内容块推荐
  - 智能选择规则生成

### 5. 数据处理模块
- 数据清洗（基于Pandas）
- 数据格式转换
- 数据导出（CSV/JSON/Excel）
- 数据预览

## 数据流设计

### 1. 配置数据流
```
配置界面 -> Vue Store -> Flask API -> SQLite存储
```

### 2. 任务数据流
```
任务创建 -> 任务队列(Redis) -> 调度器 -> 执行器(Selenium) -> 数据处理(Pandas) -> 存储服务
```

### 3. 爬取数据流
```
浏览器模块 -> 选择器模块 -> 规则生成 -> 数据提取(BeautifulSoup4) -> 数据处理(Pandas) -> 存储服务
```

## 项目结构

```
├── pyproject.toml          # Poetry配置文件
├── src/
│   ├── backend/            # Python后端
│   │   ├── api/            # Flask API接口
│   │   ├── services/       # 核心服务
│   │   ├── models/         # 数据模型
│   │   ├── utils/          # 工具函数
│   │   └── database/       # 数据库操作
│   ├── frontend/           # Vue.js前端
│   │   ├── components/     # UI组件
│   │   ├── views/          # 页面
│   │   ├── store/          # 状态管理
│   │   └── utils/          # 工具函数
│   ├── desktop/            # PyQt6桌面应用
│   │   ├── windows/        # 窗口类
│   │   ├── widgets/        # 自定义控件
│   │   └── browser/        # 浏览器模块
│   └── common/             # 共享代码
├── tests/                  # 测试用例
├── docs/                   # 文档
└── scripts/                # 构建脚本
```

## 开发计划

### 第一阶段：基础框架搭建
- Python项目初始化（Poetry）
- PyQt6基础框架搭建
- Flask API服务搭建
- Vue.js前端项目初始化

### 第二阶段：核心功能开发
- 配置管理模块
- 任务管理模块
- WebEngine浏览器模块集成

### 第三阶段：选择器与数据处理
- 元素选择器开发
- Pandas数据处理流程实现
- 数据导出功能

### 第四阶段：优化与完善
- 性能优化
- 用户体验改进
- 异常处理完善
- 自动化测试